{
  "version": 3,
  "sources": ["../../src/utils/Env.ts"],
  "sourcesContent": ["import { LocalPresence } from '../presence/LocalPresence.ts';\nimport { LocalDriver, type MatchMakerDriver } from '../matchmaker/LocalDriver/LocalDriver.ts';\nimport { logger } from '../Logger.ts';\nimport type { Presence } from '../presence/Presence.ts';\n\nexport function isColyseusCloud(): boolean {\n  return process.env.COLYSEUS_CLOUD !== undefined;\n}\n\nexport async function getDefaultPresence(): Promise<Presence> {\n  if (isColyseusCloud()) {\n    try {\n      const RedisPresence = await import('@colyseus/redis-presence');\n      return new RedisPresence.RedisPresence(process.env.REDIS_URI);\n    } catch (e) {\n      console.error(e);\n      logger.warn(\"\");\n      logger.warn(\"\u274C could not initialize RedisDriver.\");\n      logger.warn(\"\uD83D\uDC49 npm install --save @colyseus/redis-driver\");\n      logger.warn(\"\");\n    }\n  }\n  return new LocalPresence();\n}\n\nexport async function getDefaultDriver(): Promise<MatchMakerDriver> {\n  if (isColyseusCloud()) {\n    try {\n      const RedisDriver = await import('@colyseus/redis-driver');\n      return new RedisDriver.RedisDriver(process.env.REDIS_URI);\n    } catch (e) {\n      console.error(e);\n      logger.warn(\"\");\n      logger.warn(\"\u274C could not initialize RedisDriver.\");\n      logger.warn(\"\uD83D\uDC49 npm install --save @colyseus/redis-driver\");\n      logger.warn(\"\");\n    }\n  }\n  return new LocalDriver();\n}\n\nexport function getDefaultPublicAddress(): string | undefined {\n  if (isColyseusCloud()) {\n    let port = 2567;\n\n    //\n    // Multiple processes: Use NODE_APP_INSTANCE to play nicely with pm2\n    //\n    port += Number(process.env.NODE_APP_INSTANCE || \"0\");\n\n    return process.env.SUBDOMAIN + \".\" + process.env.SERVER_NAME + \"/\" + port;\n\n  } else {\n    return undefined;\n  }\n}"],
  "mappings": ";AAAA,SAAS,qBAAqB;AAC9B,SAAS,mBAA0C;AACnD,SAAS,cAAc;AAGhB,SAAS,kBAA2B;AACzC,SAAO,QAAQ,IAAI,mBAAmB;AACxC;AAEA,eAAsB,qBAAwC;AAC5D,MAAI,gBAAgB,GAAG;AACrB,QAAI;AACF,YAAM,gBAAgB,MAAM,OAAO,0BAA0B;AAC7D,aAAO,IAAI,cAAc,cAAc,QAAQ,IAAI,SAAS;AAAA,IAC9D,SAAS,GAAG;AACV,cAAQ,MAAM,CAAC;AACf,aAAO,KAAK,EAAE;AACd,aAAO,KAAK,0CAAqC;AACjD,aAAO,KAAK,qDAA8C;AAC1D,aAAO,KAAK,EAAE;AAAA,IAChB;AAAA,EACF;AACA,SAAO,IAAI,cAAc;AAC3B;AAEA,eAAsB,mBAA8C;AAClE,MAAI,gBAAgB,GAAG;AACrB,QAAI;AACF,YAAM,cAAc,MAAM,OAAO,wBAAwB;AACzD,aAAO,IAAI,YAAY,YAAY,QAAQ,IAAI,SAAS;AAAA,IAC1D,SAAS,GAAG;AACV,cAAQ,MAAM,CAAC;AACf,aAAO,KAAK,EAAE;AACd,aAAO,KAAK,0CAAqC;AACjD,aAAO,KAAK,qDAA8C;AAC1D,aAAO,KAAK,EAAE;AAAA,IAChB;AAAA,EACF;AACA,SAAO,IAAI,YAAY;AACzB;AAEO,SAAS,0BAA8C;AAC5D,MAAI,gBAAgB,GAAG;AACrB,QAAI,OAAO;AAKX,YAAQ,OAAO,QAAQ,IAAI,qBAAqB,GAAG;AAEnD,WAAO,QAAQ,IAAI,YAAY,MAAM,QAAQ,IAAI,cAAc,MAAM;AAAA,EAEvE,OAAO;AACL,WAAO;AAAA,EACT;AACF;",
  "names": []
}
